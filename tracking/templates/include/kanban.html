{% extends 'include/base.html' %}
{% load static %}

{% block title %}
    <div class="block_title">
        <h2 class="title" style="margin-bottom: 50px">Доска задач</h2>
    </div>
{% endblock title %}

{% block content %}
    <main class="content">
        <div class="container p-0">
            <div class="d-flex justify-content-center">
                <div class="row w-100">
                    {% for data in tasks_by_state %}
                        <div class="col-12 col-lg-6 col-xl-3">
                            <div class="card card-border-primary">
                                <div class="card-header">
                                    <h3 class="card-title mb-1">
                                        <img src="{% static 'img/test.svg' %}" alt="state" rel="icon">
                                        {{ data.state }}
                                    </h3>
                                    <h6 class="card-subtitle text-muted" style="margin-top: 20px">
                                        <svg xmlns="http://www.w3.org/2000/svg" id="Outline" viewBox="0 0 24 24"
                                             width="24" height="24">
                                            <path d="M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm0,22A10,10,0,1,1,22,12,10.011,10.011,0,0,1,12,22Z"/>
                                            <path d="M12,10H11a1,1,0,0,0,0,2h1v6a1,1,0,0,0,2,0V12A2,2,0,0,0,12,10Z"/>
                                            <circle cx="12" cy="6.5" r="1.5"/>
                                        </svg>
                                        {{ data.description|truncatechars:200 }}
                                    </h6>
                                </div>

                                <div class="card-body p-3">
                                    {% for task in data.tasks %}
                                        <div class="card mb-3 bg-light">
                                            <div class="card-body p-3">
                                                <h5>
                                                    <img src="{% static 'img/pencil.svg' %}" alt="circle" rel="icon">
                                                    {{ task.code }}
                                                </h5>

                                                <h6 style="margin-top: 20px">
                                                    <svg xmlns="http://www.w3.org/2000/svg" id="Outline"
                                                         viewBox="0 0 24 24" width="24" height="24">
                                                        <path d="M7.4,5.553a1.041,1.041,0,0,0-1.789,0l-5.5,11a1,1,0,1,0,1.789.894L3.619,14H9.383l1.724,3.447a1,1,0,1,0,1.789-.894ZM4.619,12,6.5,8.236,8.383,12Z"/>
                                                        <path d="M23,8a1,1,0,0,0-1,1v.026A4.948,4.948,0,0,0,19,8a5,5,0,0,0,0,10,4.948,4.948,0,0,0,3-1.026V17a1,1,0,0,0,2,0V9A1,1,0,0,0,23,8Zm-4,8a3,3,0,1,1,3-3A3,3,0,0,1,19,16Z"/>
                                                    </svg>
                                                    {{ task.name }}
                                                </h6>

                                                <p style="margin-top: 10px">
                                                    <svg xmlns="http://www.w3.org/2000/svg" id="Outline"
                                                         viewBox="0 0 24 24" width="24" height="24">
                                                        <path d="M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm0,22A10,10,0,1,1,22,12,10.011,10.011,0,0,1,12,22Z"/>
                                                        <path d="M12,10H11a1,1,0,0,0,0,2h1v6a1,1,0,0,0,2,0V12A2,2,0,0,0,12,10Z"/>
                                                        <circle cx="12" cy="6.5" r="1.5"/>
                                                    </svg>
                                                    {{ task.description|truncatechars:200 }}
                                                </p>

                                                <p style="margin-top: 10px">
                                                    <svg xmlns="http://www.w3.org/2000/svg" id="Outline" viewBox="0 0 24 24" width="24" height="24">
                                                        <path d="M12,12A6,6,0,1,0,6,6,6.006,6.006,0,0,0,12,12ZM12,2A4,4,0,1,1,8,6,4,4,0,0,1,12,2Z"/>
                                                        <path d="M12,14a9.01,9.01,0,0,0-9,9,1,1,0,0,0,2,0,7,7,0,0,1,14,0,1,1,0,0,0,2,0A9.01,9.01,0,0,0,12,14Z"/>
                                                    </svg>
                                                    {{ task.first_name }} {{ task.last_name }}
                                                </p>

                                                <p style="margin-top: 10px">
                                                    <svg xmlns="http://www.w3.org/2000/svg" id="Outline" viewBox="0 0 24 24" width="24" height="24">
                                                        <path d="M19,2H18V1a1,1,0,0,0-2,0V2H8V1A1,1,0,0,0,6,1V2H5A5.006,5.006,0,0,0,0,7V19a5.006,5.006,0,0,0,5,5H19a5.006,5.006,0,0,0,5-5V7A5.006,5.006,0,0,0,19,2ZM2,7A3,3,0,0,1,5,4H19a3,3,0,0,1,3,3V8H2ZM19,22H5a3,3,0,0,1-3-3V10H22v9A3,3,0,0,1,19,22Z"/>
                                                        <circle cx="12" cy="15" r="1.5"/>
                                                        <circle cx="7" cy="15" r="1.5"/>
                                                        <circle cx="17" cy="15" r="1.5"/>
                                                    </svg>
                                                    {{ task.date_change }}
                                                </p>

                                                <a class="btn btn-outline-primary" style="margin-top: 10px"
                                                   href="{% url 'task_description' project_id=project_id task_id=task.task_id %}">
                                                    <svg xmlns="http://www.w3.org/2000/svg" id="Outline"
                                                         viewBox="0 0 24 24" width="24" height="24">
                                                        <path d="M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm0,22A10,10,0,1,1,22,12,10.011,10.011,0,0,1,12,22Z"/>
                                                        <path d="M12,10H11a1,1,0,0,0,0,2h1v6a1,1,0,0,0,2,0V12A2,2,0,0,0,12,10Z"/>
                                                        <circle cx="12" cy="6.5" r="1.5"/>
                                                    </svg>
                                                    Сведения
                                                </a>
                                            </div>
                                        </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </main>
{% endblock content %}